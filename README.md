# Shell Emulator

## Описание проекта
`Shell Emulator` – это эмулятор командной оболочки, написанный на Python, который позволяет пользователям выполнять базовые команды, такие как просмотр содержимого директорий (`ls`), переход между каталогами (`cd`), создание пустых файлов (`touch`), очистка экрана (`clear`) и завершение работы (`exit`). Система также логирует все действия пользователя и сохраняет их в лог-файл в формате JSON.

Эмулятор использует:
- Временное файловое хранилище, извлекаемое из ZIP-архива, указанного в конфигурации.
- Файл конфигурации в формате TOML, который задаёт начальные параметры, такие как имя пользователя, путь к ZIP-архиву файловой системы и путь к лог-файлу.

## Функциональность

- **Инициализация файловой системы**: Распаковывает ZIP-архив в временную директорию.
- **Логирование**: Каждое действие пользователя записывается в JSON-файл с указанием времени выполнения.
- **Команды оболочки**:
  - `ls`: Показывает содержимое текущей директории.
  - `cd <путь>`: Переходит в указанную директорию.
  - `touch <имя файла>`: Создаёт пустой файл в текущей директории.
  - `clear`: Очищает экран.
  - `exit`: Сохраняет лог и завершает работу.

---

## Установка и настройка

1. **Клонируйте репозиторий**:
   ```bash
   git clone <URL>
   cd <папка_проекта>
   ```

2. **Убедитесь, что установлен Python 3.9+**:
   ```bash
   python --version
   ```

3. **Создайте файл конфигурации (например, `config.toml`)**:
   Пример конфигурации:
   ```toml
   [user]
   name = "test_user"
   computer = "test_computer"

   [filesystem]
   path = "filesystem.zip"

   [log]
   path = "session_log.json"
   ```

4. **Создайте ZIP-файл с файловой системой**:
   Убедитесь, что `filesystem.zip` содержит необходимые директории и файлы.

---

## Запуск

Запустите эмулятор с указанием пути к конфигурационному файлу:
```bash
python emulator_shell.py config.toml
```

---

## Использование

После запуска вы попадёте в эмулятор. Пример взаимодействия:

```bash
test_user@test_computer:/$ ls
dir1
file1.txt

test_user@test_computer:/$ cd dir1
test_user@test_computer:/dir1$ touch newfile.txt
test_user@test_computer:/dir1$ ls
newfile.txt

test_user@test_computer:/dir1$ exit
```

---

## Формат логирования

Все действия пользователя записываются в лог-файл, указанный в конфигурации. Пример `session_log.json`:
```json
[
    {
        "user": "test_user",
        "action": "ls",
        "timestamp": "2024-12-07T11:24:34.710968"
    },
    {
        "user": "test_user",
        "action": "cd test_dir",
        "timestamp": "2024-12-07T11:24:43.181115"
    }
]
```

---

## Тестирование

Для тестирования отдельных функций можно использовать модуль `unittest`. Пример теста:
```python
import unittest
from emulator_shell import ShellEmulator

class TestShellEmulator(unittest.TestCase):
    def test_load_config(self):
        emulator = ShellEmulator("config.toml")
        self.assertEqual(emulator.username, "test_user")
        self.assertEqual(emulator.computername, "test_computer")

if __name__ == '__main__':
    unittest.main()
```

Запустите тесты:
```bash
python -m unittest test_emulator.py
```

---

## Возможные ошибки

- **Файл конфигурации не найден**:
  Убедитесь, что путь к `config.toml` указан верно.
- **ZIP-архив не найден**:
  Проверьте наличие файла `filesystem.zip` и его содержимого.
- **Команда не найдена**:
  Если вы ввели неизвестную команду, убедитесь, что она поддерживается (см. раздел "Команды оболочки").

---

## Автор

Проект создан тестовым пользователем `test_user` в рамках демонстрации возможностей Python.